# First stage: Install dos2unix and convert line endings
FROM gcc:latest AS builder

COPY entrypoint.sh ./entrypoint.sh

RUN apt-get update && apt-get install -y dos2unix
RUN dos2unix ./entrypoint.sh
RUN sed -i '1s/^/#!\/bin\/sh\n/' ./entrypoint.sh

# Second stage: Copy the script from the first stage and build the final image
FROM gcc:latest

RUN apt-get update && apt-get install -y time

COPY --from=builder /entrypoint.sh ./entrypoint.sh

RUN chmod +x ./entrypoint.sh

CMD ["/entrypoint.sh"]
